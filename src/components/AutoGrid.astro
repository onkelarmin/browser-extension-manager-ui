---
// Types
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"div"> {
  type: "fit" | "fill";
  minWidth?: string;
  colGap?: string;
  rowGap?: string;
}

const {
  type,
  minWidth = "16rem",
  colGap = "md",
  rowGap = "md",
  ...rest
} = Astro.props;

const colGapStr = `var(--space-cont-${colGap})`;
const rowGapStr = `var(--space-cont-${rowGap})`;
---

<div class:list={["auto-grid", type]} {...rest}>
  <slot />
</div>

<style lang="scss" define:vars={{ minWidth, colGapStr, rowGapStr }}>
  .auto-grid {
    display: grid;
    column-gap: var(--colGapStr);
    row-gap: var(--rowGapStr);

    &.fit {
      grid-template-columns: repeat(
        auto-fit,
        minmax(min(var(--minWidth), 100%), 1fr)
      );
    }

    &.fill {
      grid-template-columns: repeat(
        auto-fill,
        minmax(min(var(--minWidth), 100%), 1fr)
      );
    }
  }
</style>
